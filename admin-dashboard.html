<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SMIPRO - Control Tower</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="style.css">

    <!-- LIBRARY PDF -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <!-- Plugin Tambahan untuk Tabel PDF Otomatis -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.28/jspdf.plugin.autotable.min.js"></script>
    
    <style>
        /* === CSS ADMIN LAYOUT === */
        body { background: #000; overflow-x: hidden; margin: 0; font-family: 'Segoe UI', sans-serif; }
        
        .admin-container { display: flex; min-height: 100vh; }

        /* SIDEBAR */
        .sidebar { width: 250px; background: #111; border-right: 1px solid #333; display: flex; flex-direction: column; position: fixed; height: 100vh; z-index: 100; }
        .sidebar-header { padding: 20px; text-align: center; border-bottom: 1px solid #222; }
        .sidebar-menu { flex: 1; padding: 20px 0; overflow-y: auto; }
        .menu-item { padding: 15px 25px; color: #888; cursor: pointer; display: flex; align-items: center; gap: 15px; transition: 0.3s; text-decoration: none; font-size: 0.95rem; }
        .menu-item:hover, .menu-item.active { background: #1a1a1a; color: #E50914; border-left: 4px solid #E50914; }
        .menu-item i { width: 25px; text-align: center; }

        /* MAIN CONTENT */
        .main-content { flex: 1; margin-left: 250px; padding: 30px; background: #000; }

        /* CARD STATISTIK */
        .stats-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-bottom: 30px; }
        .stat-card { background: #151515; padding: 20px; border-radius: 10px; border: 1px solid #333; display: flex; align-items: center; gap: 20px; }
        .stat-icon { font-size: 2rem; color: #E50914; background: rgba(229, 9, 20, 0.1); width: 60px; height: 60px; display: flex; align-items: center; justify-content: center; border-radius: 10px; }

        /* TABLE */
        .admin-table { width: 100%; border-collapse: collapse; background: #151515; border-radius: 10px; overflow: hidden; border: 1px solid #333; }
        .admin-table th, .admin-table td { padding: 15px; text-align: left; border-bottom: 1px solid #222; color: #ddd; }
        .admin-table th { background: #222; color: #E50914; text-transform: uppercase; font-size: 0.8rem; }
        .admin-table tr:hover { background: #1a1a1a; }
        
        /* BUTTONS */
        .btn-action { padding: 5px 10px; border-radius: 5px; border: none; cursor: pointer; font-size: 0.8rem; color: white; margin-right: 5px; }
        .btn-view { background: #00d2ff; color: black; }
        .btn-edit { background: #FFD700; color: black; }
        .btn-delete { background: #E50914; }

        /* CMS FORM */
        .sub-tabs { display: flex; gap: 10px; margin-bottom: 20px; border-bottom: 1px solid #333; padding-bottom: 10px; }
        .sub-tab-btn { background: none; border: 1px solid #444; color: #888; padding: 8px 20px; border-radius: 20px; cursor: pointer; }
        .sub-tab-btn.active { background: #E50914; color: white; border-color: #E50914; }
        .cms-form-group { background: #151515; padding: 20px; border-radius: 10px; border: 1px solid #333; margin-bottom: 20px; }
        .cms-input { width: 100%; padding: 10px; background: #222; border: 1px solid #444; color: white; margin-bottom: 15px; border-radius: 5px; box-sizing: border-box; }
        .cms-label { color: #aaa; font-size: 0.85rem; margin-bottom: 5px; display: block; }

        /* UTILS */
        .hidden { display: none; }
        .section-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; border-bottom: 1px dashed #333; padding-bottom: 10px; }
        
        /* MONITOR SPLIT */
        .monitor-split-wrapper { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; min-height: 400px; }
        .monitor-panel { background: #0a0a0a; border: 1px solid #333; border-radius: 10px; display: flex; flex-direction: column; }
        .panel-title { margin: 0; padding: 15px; background: #111; border-radius: 10px 10px 0 0; font-size: 1rem; text-align: center; font-weight: bold; }
        .monitor-list { padding: 15px; flex: 1; overflow-y: auto; max-height: 500px; }
        
        .req-item { background: #1a1a1a; padding: 15px; border-radius: 8px; margin-bottom: 10px; border: 1px solid #333; position: relative; animation: fadeIn 0.5s; }
        .req-item.pending { border-left: 5px solid #ffeb3b; }
        .req-item.live { border-left: 5px solid #00ff00; background: #051a05; }
        .req-amount { position: absolute; top: 10px; right: 10px; background: #333; color: gold; padding: 3px 8px; border-radius: 5px; font-weight: bold; font-size: 0.9rem; }
        
        .btn-control { width: 100%; padding: 10px; border: none; border-radius: 5px; cursor: pointer; font-weight: bold; margin-top: 10px; transition: 0.3s; }
        .btn-approve { background: #00ff00; color: black; }
        .btn-finish { background: #333; color: #ccc; border: 1px solid #555; }
        .btn-finish:hover { background: white; color: black; }
        .empty-state { text-align: center; color: #444; margin-top: 50px; font-style: italic; }

        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        @media (max-width: 768px) {
            .sidebar { width: 60px; } .sidebar-header h3, .menu-item span { display: none; }
            .main-content { margin-left: 60px; padding: 15px; }
            .monitor-split-wrapper { grid-template-columns: 1fr; }
        }

        /* CSS KHUSUS NOTIFIKASI DASHBOARD */
.notif-grid {
    display: flex;
    flex-direction: column;
    gap: 10px;
    margin-top: 15px;
}

/* Kartu Notifikasi */
.notif-card {
    background: #151515;
    border: 1px solid #333;
    border-left: 5px solid #888; /* Default abu-abu */
    padding: 15px;
    border-radius: 8px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    transition: 0.3s;
    animation: fadeIn 0.5s;
}

/* Warna Warni Berdasarkan Tipe Notif */
.notif-card.urgent { border-left-color: #E50914; background: #1a0505; } /* Merah (Penting) */
.notif-card.warning { border-left-color: #ffeb3b; background: #1a1a00; } /* Kuning (Perlu Cek) */
.notif-card.success { border-left-color: #00ff00; background: #051a05; } /* Hijau (Info) */

/* Teks di dalam notif */
.notif-content h4 { margin: 0 0 5px 0; color: white; font-size: 1rem; }
.notif-content p { margin: 0; color: #aaa; font-size: 0.85rem; }

/* Tombol Aksi di Kanan */
.notif-action {
    display: flex;
    gap: 5px;
}

.empty-state-box {
    text-align: center;
    padding: 40px;
    color: #444;
    border: 1px dashed #333;
    border-radius: 10px;
}

/* RESPONSIF HP: Tombol turun ke bawah jika layar sempit */
@media (max-width: 600px) {
    .notif-card {
        flex-direction: column;
        align-items: flex-start;
        gap: 15px;
    }
    .notif-action {
        width: 100%;
    }
    .notif-action button {
        flex: 1; /* Tombol jadi lebar penuh */
        padding: 10px;
    }
}
    </style>
</head>
<body>

<div class="admin-container">
    
    <!-- SIDEBAR -->
    <nav class="sidebar">
        <div class="sidebar-header">
            <img src="https://raw.githubusercontent.com/sekolakonangindonesia-prog/smipro-streetart/main/Logo_Stretart.png" style="width:50px;">
            <h3 style="color:white; margin:10px 0 0; font-size:1rem;">CONTROL TOWER</h3>
            <a href="#" onclick="goToHomeAsAdmin()" style="display:inline-block; margin-top:10px; color:#E50914; text-decoration:none; font-size:0.8rem; border:1px solid #E50914; padding:2px 8px; border-radius:4px;">
                <i class="fa-solid fa-house"></i> Lihat Home
            </a>
        </div>            
        
        <div class="sidebar-menu">
            <a href="#" class="menu-item active" onclick="showView('dashboard', this)"><i class="fa-solid fa-chart-line"></i> <span>Overview</span></a>
            <a href="#" class="menu-item" onclick="showView('mitra', this)"><i class="fa-solid fa-store"></i> <span>Data Mitra</span></a>
            <a href="#" class="menu-item" onclick="showView('venue', this)"><i class="fa-solid fa-map-location-dot"></i> <span>Data Venue Lokasi</span></a>
            <a href="#" class="menu-item" onclick="showView('performer', this)"><i class="fa-solid fa-guitar"></i> <span>Data Performer</span></a>               
            <a href="#" class="menu-item" onclick="showView('mentor', this)"><i class="fa-solid fa-chalkboard-user"></i> <span>Data Mentor</span></a>
            <a href="#" class="menu-item" onclick="showView('cafe', this)"><i class="fa-solid fa-mug-hot"></i> <span>Data Cafe & Tour</span></a>
            <a href="#" class="menu-item" onclick="showView('students', this)"><i class="fa-solid fa-user-graduate"></i> <span>Bengkel Siswa</span></a>
            <a href="#" class="menu-item" onclick="showView('cms', this)"><i class="fa-solid fa-pen-to-square"></i> <span>Kelola Konten</span></a>
             <a href="#" class="menu-item" onclick="showView('live', this)"><i class="fa-solid fa-satellite-dish"></i> <span>Control Room & Galeri</span></a>
            <a href="#" class="menu-item" onclick="showView('finance', this)"><i class="fa-solid fa-money-bill-wave"></i> <span>Keuangan & Request</span></a>
            
            <div style="margin-top:auto; border-top:1px solid #222;">
                <a href="#" class="menu-item" onclick="adminLogout()" style="color:#E50914;"><i class="fa-solid fa-right-from-bracket"></i> <span>Logout</span></a>
            </div>
        </div>
    </nav>

    <!-- MAIN CONTENT -->
    <main class="main-content">
        
        <!-- 1. OVERVIEW -->
        <div id="view-dashboard" class="admin-view">
            <div class="section-header">
                <div><h2 style="margin:0; color:white;">Dashboard Overview</h2><span style="color:#888;" id="current-date">-</span></div>
                <div style="text-align:right;"><b style="color:white;">Super Admin</b><br><small style="color:#00ff00;">‚óè Online</small></div>
            </div>
            <div class="stats-grid">
                <div class="stat-card"><div class="stat-icon"><i class="fa-solid fa-store"></i></div><div><h3 style="margin:0; color:white;" id="count-mitra">0</h3><small style="color:#888;">Total Mitra</small></div></div>
                <div class="stat-card"><div class="stat-icon" style="color:#FFD700; background:rgba(255, 215, 0, 0.1);"><i class="fa-solid fa-guitar"></i></div><div><h3 style="margin:0; color:white;" id="count-perf">0</h3><small style="color:#888;">Total Performer</small></div></div>
                 <div class="stat-card">
                    <div class="stat-icon" style="color:#00ff00; background:rgba(0, 255, 0, 0.1);">
                        <i class="fa-solid fa-wallet"></i>
                    </div>
                    <div style="flex:1;">
                        <b style="color:white; font-size:0.9rem;">PEMASUKAN REAL</b>
                        
                        <!-- Rincian -->
                        <div style="display:flex; justify-content:space-between; font-size:0.8rem; color:#aaa; margin-top:5px; border-bottom:1px dashed #444; padding-bottom:5px;">
                            <span>üèüÔ∏è Venue</span> <span id="rev-venue" style="color:white;">Rp 0</span>
                        </div>
                        <div style="display:flex; justify-content:space-between; font-size:0.8rem; color:#aaa; margin-top:5px;">
                            <span>‚òï Cafe</span> <span id="rev-cafe" style="color:white;">Rp 0</span>
                        </div>
                        
                        <!-- Total Besar -->
                        <h3 style="margin:5px 0 0 0; color:#00ff00; text-align:right;" id="rev-total">Rp 0</h3>
                    </div>
                </div>
            </div>      
            
        <!-- JUDUL SECTION -->
    <div class="section-header" style="margin-top: 40px; border-bottom: 1px solid #333; padding-bottom: 10px;">
        <h3 style="margin:0; color:#E50914; display:flex; align-items:center; gap:10px;">
            <i class="fa-solid fa-bell"></i> PUSAT NOTIFIKASI & APPROVAL
        </h3>
    </div>

    <!-- WADAH LIST NOTIFIKASI (Responsive) -->
    <div id="admin-notification-area" class="notif-grid">
        <!-- Nanti Javascript akan mengisi ini secara otomatis -->
        <div class="empty-state-box">
            <i class="fa-solid fa-check-circle"></i>
            <p>Tidak ada notifikasi baru saat ini.</p>
        </div>
    </div>
</div>

        <!-- VIEW 2: MANAJEMEN MITRA & STATISTIK (UPDATED) -->
        <div id="view-mitra" class="admin-view hidden">
            <div class="section-header">
                <h2 style="margin:0; color:white;">Data Mitra & Laporan</h2>
            </div>

            <!-- SUB TABS -->
            <div class="sub-tabs">
                <button class="sub-tab-btn active" onclick="switchMitraTab('mitra-list', this)">Daftar Warung</button>
                <button class="sub-tab-btn" onclick="switchMitraTab('mitra-stats', this)">Laporan Statistik</button>
            </div>
            
            <!-- TAB 1: TABEL DAFTAR WARUNG -->
            <div id="mitra-list" class="mitra-content">
                <div style="text-align:right; margin-bottom:10px;">
                    <button class="btn-action btn-view" onclick="alert('Fitur Tambah Mitra Manual')">+ Tambah</button>
                </div>
                <table class="admin-table">
                    <thead>
                        <tr>
                            <th>Nama Warung</th>
                            <th>Pemilik</th>
                            <th>Meja</th>
                            <th>Status</th>
                            <th>Aksi</th>
                        </tr>
                    </thead>
                    <tbody id="mitra-table-body">
                        <!-- Data Mitra akan di-render di sini oleh JS -->
                        <tr><td colspan="5" style="text-align:center;">Memuat data...</td></tr>
                    </tbody>
                </table>
            </div>

            <!-- TAB 2: STATISTIK & LAPORAN -->
            <div id="mitra-stats" class="mitra-content hidden">
                <div class="section-header" style="border:none;">
                    <h3 style="margin:0; color:#E50914;">Analisa Performa UMKM</h3>
                    
                    <div style="display:flex; gap:10px;">
                        <select id="report-filter" class="cms-input" style="width:auto; padding:5px; margin:0;">
                            <option value="all">Semua Waktu</option>
                            <option value="month">Bulan Ini</option>
                            <option value="week">Minggu Ini</option>
                        </select>
                        <button class="btn-action btn-view" onclick="generateReportPDF()"><i class="fa-solid fa-print"></i> Cetak Laporan PDF</button>
                    </div>
                </div>

                <!-- VIEW KHUSUS: MANAJEMEN VENUE (LOKASI UTAMA) -->
        <div id="view-venue" class="admin-view hidden">
            <div class="section-header">
                <h2 style="margin:0; color:white;">Manajemen Venue Lokasi</h2>
            </div>
            
            <!-- FORM INPUT VENUE -->
            <div class="cms-form-group" style="display:flex; gap:20px; align-items:center;">
                <!-- Upload Foto Venue -->
                <div style="text-align:center; cursor:pointer;" onclick="document.getElementById('venue-file').click()">
                    <img id="venue-preview" src="https://via.placeholder.com/100?text=Foto" style="width:100px; height:80px; object-fit:cover; border:2px dashed #555; border-radius:10px;">
                    <input type="file" id="venue-file" style="display:none;" accept="image/*" onchange="previewVenueImg(this)">
                    <div style="font-size:0.7rem; color:#888; margin-top:5px;">Foto Lokasi</div>
                </div>

                <!-- Input Data -->
                <div style="flex:1;">
                    <input type="hidden" id="venue-edit-id"> <!-- ID untuk Edit -->
                    
                    <div style="display:grid; grid-template-columns: 2fr 1fr; gap:10px;">
                        <div>
                            <label class="cms-label">Nama Venue:</label>
                            <input type="text" id="venue-name" class="cms-input" placeholder="Contoh: Taman Maramis Zone">
                        </div>
                        <div>
                            <label class="cms-label">Urutan Tampil:</label>
                            <input type="number" id="venue-order" class="cms-input" placeholder="Urutan (1,2,3)">
                        </div>
                    </div>
                    
                    <label class="cms-label">Deskripsi Singkat:</label>
                    <input type="text" id="venue-desc" class="cms-input" placeholder="Contoh: Pusat Kuliner Malam">

                    <div style="display:flex; gap:10px; margin-top:10px;">
                        <button id="btn-save-venue" class="btn-action btn-view" onclick="saveVenue()" style="width:100%;">+ Simpan Venue</button>
                        <button id="btn-cancel-venue" class="btn-action btn-delete" onclick="resetVenueForm()" style="width:auto; display:none;">Batal</button>
                    </div>
                </div>
            </div>

            <!-- TABEL LIST VENUE -->
            <table class="admin-table" style="margin-top:20px;">
                <thead>
                    <tr>
                        <th style="width:50px;">Img</th>
                        <th>Urutan</th>
                        <th>Nama Venue & Deskripsi</th>
                        <th>Status</th>
                        <th>Aksi</th>
                    </tr>
                </thead>
                <tbody id="venue-table-body">
                    <tr><td colspan="5" align="center">Memuat data...</td></tr>
                </tbody>
            </table>
        </div>

                <!-- RINGKASAN -->
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon" style="color:#00ff00; background:rgba(0,255,0,0.1);"><i class="fa-solid fa-users"></i></div>
                        <div>
                            <h3 style="margin:0; color:white;" id="stat-total-visitor">0</h3>
                            <small style="color:#888;">Total Pengunjung (Pax)</small>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon" style="color:gold; background:rgba(255,215,0,0.1);"><i class="fa-solid fa-utensils"></i></div>
                        <div>
                            <h3 style="margin:0; color:white;" id="stat-total-trx">0</h3>
                            <small style="color:#888;">Total Transaksi Meja</small>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon" style="color:#00d2ff; background:rgba(0,210,255,0.1);"><i class="fa-solid fa-money-bill-trend-up"></i></div>
                        <div>
                            <h3 style="margin:0; color:white;" id="stat-total-omzet">Rp 0</h3>
                            <small style="color:#888;">Estimasi Omzet Total</small>
                        </div>
                    </div>
                </div>

                <!-- RANKING WARUNG -->
                <div style="background:#151515; padding:20px; border-radius:10px; border:1px solid #333;">
                    <h4 style="margin-top:0; color:#FFD700;">üèÜ Top Warung Terlaris</h4>
                    <table class="admin-table">
                        <thead>
                            <tr>
                                <th>Peringkat</th>
                                <th>Nama Warung</th>
                                <th>Jml Transaksi</th>
                                <th>Total Pengunjung</th>
                                <th>Total Omzet</th>
                            </tr>
                        </thead>
                        <tbody id="warung-ranking-body">
                            <tr><td colspan="5" style="text-align:center;">Menghitung data...</td></tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- 3. PERFORMER -->
        <div id="view-performer" class="admin-view hidden">
            <div class="section-header"><h2 style="margin:0; color:white;">Data Performer</h2></div>
            <table class="admin-table">
                <thead><tr><th>Nama Artis</th><th>Genre</th><th>Status</th><th>Aksi</th></tr></thead>
                <tbody id="perf-table-body"></tbody>
            </table>
        </div>

        <!-- 4. MENTOR -->
        <div id="view-mentor" class="admin-view hidden">
            <div class="section-header">
                <h2 style="margin:0; color:white;">Data Mentor</h2>
                <button class="btn-action btn-edit" onclick="seedMentors()">+ Generate Data Awal</button>
            </div>
            <table class="admin-table">
                <thead><tr><th>Nama Mentor</th><th>Spesialisasi</th><th>Status</th><th>Aksi</th></tr></thead>
                <tbody id="mentor-table-body"><tr><td colspan="4" style="text-align:center;">Memuat...</td></tr></tbody>
            </table>
        </div>

        <!-- 9. VIEW CAFE & TOUR (STRUKTUR FINAL & RAPI) -->
<div id="view-cafe" class="admin-view hidden">
    <div class="section-header">
        <h2 style="margin:0; color:white;">SMIPRO On Tour (Cafe Partner)</h2>
    </div>

    <!-- TAB NAVIGASI -->
    <div class="sub-tabs">
        <button class="sub-tab-btn active" onclick="switchCafeTab('cafe-data', this)">Data Cafe</button>
        <button class="sub-tab-btn" onclick="switchCafeTab('cafe-report', this)">Pusat Kontrol (Laporan)</button>
    </div>

    <!-- TAB 1: MANAJEMEN CAFE -->
    <div id="cafe-data" class="cafe-content">
        <!-- Form Input -->
        <div class="cms-form-group" style="display:flex; gap:20px; align-items:center;">
            <div style="text-align:center; cursor:pointer;" onclick="document.getElementById('cafe-file').click()">
                <img id="cafe-preview" src="https://via.placeholder.com/100?text=Logo" style="width:80px; height:80px; border-radius:50%; object-fit:cover; border:2px dashed #555;">
                <input type="file" id="cafe-file" style="display:none;" accept="image/*" onchange="previewCafeImg(this)">
                <div style="font-size:0.7rem; color:#888; margin-top:5px;">Upload Logo</div>
            </div>
            <div style="flex:1;">
                <h4 style="margin-top:0; color:#E50914; margin-bottom:10px;">Kelola Data Partner</h4>
                <input type="hidden" id="cafe-edit-id">
                <div style="display:grid; grid-template-columns: 1fr 1fr; gap:10px; margin-bottom:10px;">
                    <input type="text" id="new-cafe-name" class="cms-input" placeholder="Nama Cafe" style="margin:0;">
                    <input type="text" id="new-cafe-address" class="cms-input" placeholder="Alamat Singkat" style="margin:0;">
                </div>
                <div style="display:flex; gap:10px;">
                    <button id="btn-save-cafe" class="btn-action btn-view" onclick="saveCafe()" style="width:100%;">+ Simpan Partner</button>
                    <button id="btn-cancel-cafe" class="btn-action btn-delete" onclick="resetCafeForm()" style="width:auto; display:none;">Batal</button>
                </div>
            </div>
        </div>
        
        <!-- Tabel Daftar Cafe -->
        <table class="admin-table">
            <thead>
                <tr>
                    <th style="width:50px;">Logo</th>
                    <th>Nama Cafe</th>
                    <th>Alamat</th>
                    <th>Aksi</th>
                </tr>
            </thead>
            <tbody id="cafe-table-body">
                <tr><td colspan="4" style="text-align:center;">Memuat data...</td></tr>
            </tbody>
        </table>
    </div>

    <!-- TAB 2: LAPORAN (PUSAT KONTROL) -->
    <div id="cafe-report" class="cafe-content hidden">
        <div class="cms-form-group" style="background:#111; border:1px solid #444;">
            <h4 style="margin-top:0; color:#00d2ff;">Filter Laporan Tour</h4>
            
            <div style="display:grid; grid-template-columns: 1fr 1fr 1fr; gap:10px; margin-bottom:15px;">
                <!-- Filter Lokasi (KOSONGKAN MANUAL OPTION BIAR BERSIH) -->
                <div>
                    <label class="cms-label">Pilih Lokasi</label>
                    <select id="rep-loc" class="cms-input">
                        <option value="all">Semua Cafe Partner</option>
                    </select>
                </div>
                <!-- Filter Waktu -->
                <div>
                    <label class="cms-label">Pilih Periode</label>
                    <select id="rep-time" class="cms-input">
                        <option value="today">Hari Ini</option>
                        <option value="week">Minggu Ini</option>
                        <option value="month">Bulan Ini</option>
                        <option value="all">Semua Waktu</option>
                    </select>
                </div>
                <!-- Filter Artis -->
                <div>
                    <label class="cms-label">Pilih Artis</label>
                    <select id="rep-art" class="cms-input">
                        <option value="all">Semua Artis</option>
                    </select>
                </div>
            </div>
            
            <div style="display:flex; gap:10px;">
                <button class="btn-action btn-edit" style="flex:1; font-weight:bold; padding:10px;" onclick="loadCafeReport()">
                    <i class="fa-solid fa-filter"></i> TAMPILKAN DATA
                </button>
                <button class="btn-action btn-view" style="width:auto; font-weight:bold; padding:10px 20px;" onclick="generateCafePDF()">
                    <i class="fa-solid fa-print"></i> PDF
                </button>
            </div>
        </div>

        <!-- Statistik Angka -->
        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-icon" style="color:#00ff00; background:rgba(0,255,0,0.1);"><i class="fa-solid fa-sack-dollar"></i></div>
                <div><h3 style="margin:0; color:white;" id="rep-total-money">Rp 0</h3><small style="color:#888;">Total Saweran</small></div>
            </div>
            <div class="stat-card">
                <div class="stat-icon" style="color:#FFD700; background:rgba(255,215,0,0.1);"><i class="fa-solid fa-music"></i></div>
                <div><h3 style="margin:0; color:white;" id="rep-total-song">0</h3><small style="color:#888;">Lagu Direquest</small></div>
            </div>
            <div class="stat-card">
                <div class="stat-icon" style="color:#00d2ff; background:rgba(0,210,255,0.1);"><i class="fa-solid fa-trophy"></i></div>
                <div><h3 style="margin:0; color:white; font-size:1rem;" id="rep-top-artist">-</h3><small style="color:#888;">Artis Terlaris</small></div>
            </div>
        </div>

        <!-- Tabel Detail -->
        <h4 style="margin-top:20px; color:#aaa;">Rincian Transaksi</h4>
        <div style="max-height:500px; overflow-y:auto;">
            <table class="admin-table">
                <thead><tr><th>Waktu</th><th>Lokasi</th><th>Artis</th><th>Lagu</th><th>Sawer</th></tr></thead>
                <tbody id="rep-detail-body">
                    <tr><td colspan="5" style="text-align:center;">Silakan filter data dulu.</td></tr>
                </tbody>
            </table>
        </div>
    </div>
</div>

        <!-- 5. BENGKEL SISWA -->
        <div id="view-students" class="admin-view hidden">
            <div class="section-header"><h2 style="margin:0; color:white;">Bengkel Siswa</h2></div>
            <div style="background:#151515; padding:20px; border-radius:10px; border:1px solid #333; margin-bottom:20px; display:flex; gap:20px; align-items:center;">
                <div style="text-align:center; cursor:pointer;" onclick="document.getElementById('student-file').click()">
                    <img id="student-preview" src="https://via.placeholder.com/100?text=Foto" style="width:80px; height:80px; border-radius:50%; object-fit:cover; border:2px dashed #555;">
                    <input type="file" id="student-file" style="display:none;" accept="image/*" onchange="previewStudentImg(this)">
                    <div style="font-size:0.7rem; color:#888; margin-top:5px;">Upload Foto</div>
                </div>
                <div style="flex:1;">
                    <h4 style="margin-top:0; color:#FFD700; margin-bottom:10px;">Tambah Siswa Baru</h4>
                    <div style="display:grid; grid-template-columns: 1fr 1fr; gap:10px; margin-bottom:10px;">
                        <input type="text" id="new-student-name" class="cms-input" placeholder="Nama Siswa / Grup" style="margin:0;">
                        <input type="text" id="new-student-genre" class="cms-input" placeholder="Genre Musik" style="margin:0;">
                    </div>
                    <button class="btn-action btn-view" onclick="addStudent()" style="width:100%;">+ Masukkan ke Bengkel</button>
                </div>
            </div>
            <table class="admin-table">
                <thead><tr><th style="width:50px;">Foto</th><th>Nama Siswa</th><th>Genre</th><th>Status Nilai</th><th>Aksi</th></tr></thead>
                <tbody id="student-table-body"><tr><td colspan="5" style="text-align:center;">Memuat...</td></tr></tbody>
            </table>
        </div>

        <!-- VIEW 6: KELOLA KONTEN (STRUKTUR RAPI) -->
        <div id="view-cms" class="admin-view hidden">
            <div class="section-header">
                <h2 style="margin:0; color:white;">Kelola Konten Publik</h2>
            </div>

            <div class="sub-tabs">
                <button class="sub-tab-btn active" onclick="switchCmsTab('cms-schedule', this)">Jadwal Event</button>
                <button class="sub-tab-btn" onclick="switchCmsTab('cms-tour', this)">Jadwal Tour (Cafe)</button>
                <button class="sub-tab-btn" onclick="switchCmsTab('cms-radio', this)">Radio/TikTok</button>
                <button class="sub-tab-btn" onclick="switchCmsTab('cms-news', this)">Berita & Podcast</button>
            </div>

            <!-- 1. JADWAL UTAMA (STADION) -->
            <div id="cms-schedule" class="cms-content">
                <div class="cms-form-group">
                    <h4 style="margin-top:0; color:#E50914;">Update Jadwal Utama (Stadion)</h4>
                    <input type="text" id="sched-display-date" class="cms-input" placeholder="Tampilan: Sabtu, 03 JAN">
                    <input type="date" id="sched-real-date" class="cms-input" style="color-scheme:dark;">
                    <select id="sched-location" class="cms-input"><option value="Stadion Bayuangga Zone">Stadion Bayuangga Zone</option></select>
                    <hr style="border-color:#333;">
                    <select id="p1-name" class="cms-input"></select><input type="text" id="p1-time" class="cms-input" placeholder="Jam">
                    <select id="p2-name" class="cms-input"></select><input type="text" id="p2-time" class="cms-input" placeholder="Jam">
                    <select id="p3-name" class="cms-input"></select><input type="text" id="p3-time" class="cms-input" placeholder="Jam">
                    <button class="btn-action btn-delete" style="width:100%; padding:15px;" onclick="saveSchedule()">PUBLISH JADWAL UTAMA</button>
                </div>

                <!-- LIST JADWAL UTAMA (SUDAH DI DALAM DIV CMS-SCHEDULE) -->
                <div style="margin-top:30px; border-top:1px dashed #444; padding-top:20px;">
                    <h4 style="color:#aaa;">Daftar Jadwal Tayang</h4>
                    <table class="admin-table">
                        <thead><tr><th>Tanggal</th><th>Lokasi</th><th>Aksi</th></tr></thead>
                        <tbody id="cms-schedule-list-body"><tr><td colspan="3">Memuat...</td></tr></tbody>
                    </table>
                </div>
            </div>

            <!-- 2. JADWAL TOUR -->
            <div id="cms-tour" class="cms-content hidden">
                <!-- Isi form tour tetap sama -->
                <div class="cms-form-group" style="border-left:5px solid #ff9800;">
                    <h4 style="margin-top:0; color:#ff9800;">Buat Jadwal Tour Cafe</h4>
                    <input type="text" id="tour-display-date" class="cms-input" placeholder="Tampilan: MINGGU, 12 OKT">
                    <input type="date" id="tour-real-date" class="cms-input" style="color-scheme:dark;">
                    <select id="tour-location" class="cms-input"><option>-- Pilih Cafe --</option></select>
                    <hr style="border-color:#333;">
                    <select id="tour-perf-name" class="cms-input"></select>
                    <input type="text" id="tour-perf-time" class="cms-input" placeholder="Jam (19:00)">
                    <button class="btn-action btn-edit" style="width:100%; padding:15px; background:#ff9800; color:black;" onclick="saveTourSchedule()">PUBLISH JADWAL TOUR</button>
                </div>
                <div style="margin-top:20px;">
                    <h4 style="color:#aaa;">Jadwal Tour Aktif</h4>
                    <table class="admin-table">
                        <tbody id="cms-tour-list-body"><tr><td colspan="3">Memuat...</td></tr></tbody>
                    </table>
                </div>
            </div>

            <!-- 3. RADIO / TIKTOK -->
            <div id="cms-radio" class="cms-content hidden">
                <div class="cms-form-group">
                    <h4 style="margin-top:0; color:#00d2ff;">Jadwal Radio</h4>
                    <label class="cms-label">Pilih Sesi Siaran:</label>
                    <select id="radio-session-select" class="cms-input" onchange="loadRadioSessionData()">
                        <option value="">-- Pilih Sesi --</option>
                        <option value="PAGI">PAGI</option><option value="SIANG">SIANG</option><option value="MALAM">MALAM</option>
                    </select>
                    
                    <div id="radio-edit-area" style="display:none; margin-top:15px; border-top:1px dashed #333; padding-top:15px;">
                        <input type="text" id="radio-title" class="cms-input" placeholder="Judul">
                        <select id="radio-host" class="cms-input"></select>
                        <input type="text" id="radio-topic" class="cms-input" placeholder="Topik">
                        <input type="text" id="radio-link" class="cms-input" placeholder="Link Streaming">
                        <label style="color:#00d2ff; font-weight:bold; display:block; margin-top:10px;">
                            <input type="checkbox" id="radio-live-toggle"> SEDANG LIVE SEKARANG
                        </label>
                        <button class="btn-action btn-view" style="width:100%; margin-top:10px;" onclick="saveRadioUpdate()">SIMPAN PERUBAHAN</button>
                    </div>
                </div>

                <!-- LIST SIARAN RADIO (Disini tempatnya) -->
                <div style="margin-top:30px; border-top:1px dashed #444; padding-top:20px;">
                    <h4 style="color:#aaa;">Daftar Siaran Radio/TikTok</h4>
                    <table class="admin-table">
                        <thead><tr><th>Sesi</th><th>Judul & Host</th><th>Status</th><th>Aksi</th></tr></thead>
                        <tbody id="radio-list-body"><tr><td colspan="4">Memuat data...</td></tr></tbody>
                    </table>
                </div>
            </div>

            <!-- 4. BERITA & PODCAST -->
            <div id="cms-news" class="cms-content hidden">
                <!-- ... (Kode berita tetap sama, tidak perlu diubah jika sudah jalan) ... -->
                <div class="cms-form-group">
                    <h4 style="margin-top:0; color:#E50914;">Publish Konten</h4>
                    <select id="content-category" class="cms-input" onchange="toggleContentForm()">
                        <option value="news">üì∞ Berita</option><option value="podcast">üéôÔ∏è Podcast</option>
                    </select>
                    <div id="form-news-container">
                        <!-- Form Berita -->
                        <input type="text" id="news-title" class="cms-input" placeholder="JUDUL HEADLINE">
                        <input type="text" id="news-tag" class="cms-input" placeholder="Tag">
                        <input type="text" id="news-thumb" class="cms-input" placeholder="Link Foto">
                        <select id="news-type" class="cms-input" onchange="toggleNewsInput()"><option value="internal">Internal</option><option value="external">Eksternal</option></select>
                        <div id="news-input-internal"><textarea id="news-content" class="cms-input" style="height:150px;" placeholder="Isi..."></textarea></div>
                        <div id="news-input-external" style="display:none;"><input type="text" id="news-url" class="cms-input" placeholder="URL"></div>
                        <button class="btn-action btn-view" onclick="saveNews()" style="width:100%; margin-top:10px;">PUBLISH BERITA</button>
                    </div>
                    <div id="form-podcast-container" style="display:none;">
                        <!-- Form Podcast -->
                         <input type="text" id="pod-title" class="cms-input" placeholder="Judul Eps">
                         <input type="text" id="pod-host" class="cms-input" placeholder="Host">
                         <input type="text" id="pod-duration" class="cms-input" placeholder="Durasi">
                         <input type="text" id="pod-link" class="cms-input" placeholder="Link YT">
                         <input type="text" id="pod-thumb" class="cms-input" placeholder="Thumb">
                         <input type="number" id="pod-order" class="cms-input" value="1">
                         <button class="btn-action btn-edit" onclick="savePodcast()" style="width:100%; margin-top:10px;">PUBLISH PODCAST</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- VIEW KHUSUS: KONTROL LAYAR & GALERI -->
        <div id="view-live" class="admin-view hidden">
            <div class="section-header">
                <h2 style="margin:0; color:#00ff00;">üì° Control Room & Media</h2>
            </div>

            <!-- SUB TABS -->
            <div class="sub-tabs">
                <button class="sub-tab-btn active" onclick="switchLiveTab('panel-live', this)">üî¥ Live Control (Venue)</button>
                <button class="sub-tab-btn" onclick="switchLiveTab('panel-galeri', this)">üé¨ Manajemen Galeri</button>
            </div>

            <!-- PANEL 1: LIVE CONTROL (Untuk Layar TV di Lokasi) -->
            <div id="panel-live" class="live-content">
               <!-- MONITOR PREVIEW (BARU) -->
                <div class="cms-form-group" style="background:#000; border:1px solid #333; text-align:center; padding:0; overflow:hidden; position:relative; aspect-ratio:16/9; max-width:600px; margin:0 auto 20px auto;">
                    <iframe id="admin-monitor-frame" width="100%" height="100%" src="" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen style="display:none;"></iframe>
                    <div id="admin-monitor-placeholder" style="padding-top:20%; color:#555;">
                        <i class="fa-solid fa-tv" style="font-size:3rem;"></i><br>Belum ada siaran aktif.
                    </div>
                </div>

                <div class="cms-form-group" style="background:#051a05; border:1px solid #00ff00;">
                    <h3 style="margin-top:0; color:#00ff00;">üì∫ Layar Utama (Saat Ini)</h3>
                    
                    <label class="cms-label">Paste Link YouTube (Live/Rekaman):</label>
                    <div style="display:flex; gap:10px;">
                        <input type="text" id="main-live-link" class="cms-input" 
                               placeholder="https://www.youtube.com/watch?v=..." style="margin:0;">
                        <button class="btn-action btn-view" onclick="updateLiveLink()" 
                                style="background:#00ff00; color:black; font-weight:bold;">
                            TAYANGKAN
                        </button>
                    </div>
                    <small style="color:#aaa;">*Video ini akan muncul otomatis di halaman Venue & Monitor di atas.</small>
                </div>
            </div>

            <!-- PANEL 2: MANAJEMEN GALERI (Untuk Website / Podcast) -->
            <div id="panel-galeri" class="live-content hidden">
                <div class="cms-form-group" style="background:#151515; border-left:5px solid #FFD700;">
                    <h4 style="margin-top:0; color:#FFD700;">Tambah Koleksi Video (Podcast/Lagu)</h4>
                    
                    <div style="display:grid; grid-template-columns: 1fr 1fr; gap:15px;">
                        <div>
                            <label class="cms-label">Judul Video / Lagu:</label>
                            <input type="text" id="vid-title" class="cms-input" placeholder="Contoh: Akulah Dia (Cover)">
                        </div>
                        <div>
                            <label class="cms-label">Nama Kreator (Artis/Mentor):</label>
                            <input type="text" id="vid-creator" class="cms-input" placeholder="Contoh: Acoustic Boys">
                        </div>
                    </div>

                    <label class="cms-label">Link YouTube:</label>
                    <input type="text" id="vid-link" class="cms-input" placeholder="https://youtube.com/...">

                    <label class="cms-label">Kategori:</label>
                    <select id="vid-category" class="cms-input">
                        <option value="Live Perform">üé§ Live Perform (Konser)</option>
                        <option value="Podcast">üéôÔ∏è Podcast & Talkshow</option>
                        <option value="Songs">üéµ Lagu-Lagu Hits (Music Video)</option>
                    </select>

                    <label class="cms-label">Deskripsi Singkat:</label>
                    <textarea id="vid-desc" class="cms-input" style="height:80px;" placeholder="Ceritakan sedikit tentang video ini..."></textarea>

                    <button class="btn-action btn-edit" style="width:100%; padding:12px; font-weight:bold;" onclick="saveGalleryVideo()">
                        <i class="fa-solid fa-cloud-arrow-up"></i> SIMPAN KE GALERI
                    </button>
                </div>

                <!-- TABEL LIST VIDEO -->
                <h4 style="margin-top:20px; color:#aaa;">Daftar Video Tersimpan</h4>
                <table class="admin-table">
                    <thead>
                        <tr>
                            <th>Preview</th>
                            <th>Info Video</th>
                            <th>Kategori</th>
                            <th>Aksi</th>
                        </tr>
                    </thead>
                    <tbody id="gallery-list-body">
                        <tr><td colspan="4" align="center">Memuat data...</td></tr>
                    </tbody>
                </table>
            </div>
        </div>
        
        <!-- 7. KEUANGAN & COMMAND CENTER -->
        <div id="view-finance" class="admin-view hidden">
            <div class="section-header">
                <h2 style="margin:0; color:white;">üí∞ Live Saweran & Stage Control</h2>
                <div style="text-align:right;"><span style="color:#00ff00; font-weight:bold;">‚óè REALTIME</span></div>
            </div>

            <!-- MONITOR SPLIT -->
            <div class="monitor-split-wrapper">
                <div class="monitor-panel">
                    <h3 class="panel-title" style="color:#ffeb3b; border-bottom:2px solid #ffeb3b;">‚è≥ MENUNGGU VALIDASI</h3>
                    <div id="list-pending" class="monitor-list"><p class="empty-state">Kosong.</p></div>
                </div>
                <div class="monitor-panel">
                    <h3 class="panel-title" style="color:#00ff00; border-bottom:2px solid #00ff00;">üì° LIVE ON STAGE</h3>
                    <div id="list-approved" class="monitor-list"><p class="empty-state">Sepi.</p></div>
                </div>
            </div>

            <hr style="border:0; border-top:1px dashed #333; margin:40px 0;">

            <!-- STATISTIK -->
            <div class="section-header">
                <h2 style="margin:0; color:white;">Laporan & Analisa</h2>
                <div style="display:flex; gap:10px;">
                    <!-- Filter Lokasi Baru -->
            <select id="filter-uang-lokasi" onchange="renderFinanceData()" class="cms-input" style="width:auto; padding:5px; margin:0;">
                    <option value="all">Semua Lokasi</option>
                    <option value="Stadion Bayuangga Zone">Stadion Pusat</option>
                    <!-- Nanti nama Cafe masuk sini otomatis -->
                </select>

                    <!-- Filter Waktu (ID BARU: filter-laporan-waktu) -->
 <select id="stats-time" onchange="renderFinanceData()" class="cms-input" style="width:auto; padding:5px; margin:0;">
    <option value="today">Hari Ini</option>
    <option value="week">Minggu Ini</option>
    <option value="month">Bulan Ini</option>
    <option value="all">Semua Waktu</option>
</select>

                    <!-- Tombol Print PDF -->
                    <button class="btn-action btn-view" onclick="generateSawerPDF()">
                        <i class="fa-solid fa-print"></i> PDF
                    </button>
                </div>
            </div>
             <div class="stats-grid">
            <div class="stat-card"><div class="stat-icon" style="color:#00ff00; background:rgba(0,255,0,0.1);"><i class="fa-solid fa-sack-dollar"></i></div><div><h3 style="margin:0; color:white;" id="stat-total-money">Rp 0</h3><small style="color:#888;">Omzet</small></div></div>
            <div class="stat-card"><div class="stat-icon" style="color:#00d2ff; background:rgba(0,210,255,0.1);"><i class="fa-solid fa-music"></i></div><div><h3 style="margin:0; color:white;" id="stat-total-req">0</h3><small style="color:#888;">Request</small></div></div>
            <div class="stat-card"><div class="stat-icon" style="color:#FFD700; background:rgba(255,215,0,0.1);"><i class="fa-solid fa-trophy"></i></div><div><h3 style="margin:0; color:white; font-size:1rem;" id="stat-top-perf">-</h3><small style="color:#888;">Top Artis</small></div></div>
        </div>

        <div style="display:grid; grid-template-columns: 1fr 1fr; gap:20px; margin-top:20px;">
            <div style="background:#151515; padding:20px; border-radius:10px; border:1px solid #333;">
                <h4 style="margin-top:0; color:#E50914;">üî• Lagu Trending</h4>
                <div id="chart-top-songs"></div>
            </div>
            <div style="background:#151515; padding:20px; border-radius:10px; border:1px solid #333; max-height:400px; overflow-y:auto;">
                <h4 style="margin-top:0; color:#aaa;">Log Transaksi</h4>
                <table class="admin-table">
                    <thead><tr><th>Waktu</th><th>Lagu</th><th>Sawer</th></tr></thead>
                    <tbody id="table-history-body"></tbody>
                </table>
            </div>
        </div>
    </div>


    </main>
</div>

     <!-- MODAL RAPORT SISWA -->
<div id="modal-raport" style="display:none; position:fixed; inset:0; background:rgba(0,0,0,0.9); z-index:3000; align-items:center; justify-content:center; padding:20px;">
    <div style="background:#1e1e1e; width:100%; max-width:500px; padding:25px; border-radius:10px; border:1px solid #444; position:relative;">
        
        <button onclick="document.getElementById('modal-raport').style.display='none'" style="position:absolute; top:15px; right:15px; background:none; border:none; color:white; font-size:1.5rem; cursor:pointer;">&times;</button>
        
        <h3 style="margin-top:0; color:#FFD700; border-bottom:1px solid #333; padding-bottom:10px;">
            <i class="fa-solid fa-list-check"></i> Raport Detail
        </h3>

        <div style="display:flex; gap:15px; align-items:center; margin-bottom:20px;">
            <img id="rap-img" src="" style="width:60px; height:60px; border-radius:50%; object-fit:cover; border:2px solid #555;">
            <div>
                <h4 id="rap-name" style="margin:0; color:white; font-size:1.2rem;">-</h4>
                <span id="rap-genre" style="color:#888; font-size:0.9rem;">-</span>
            </div>
        </div>

        <!-- TABEL NILAI PER MENTOR -->
        <table class="admin-table" style="font-size:0.9rem;">
            <thead>
                <tr>
                    <th>Nama Mentor</th>
                    <th>Spesialisasi</th>
                    <th>Nilai</th>
                </tr>
            </thead>
            <tbody id="raport-list-body">
                <!-- Data akan masuk sini lewat JS -->
            </tbody>
        </table>

        <div style="margin-top:20px; text-align:center; font-size:0.8rem; color:#666;">
            *Siswa dinyatakan LULUS jika semua Mentor memberi nilai dan tidak ada yang dibawah 75.
        </div>
    </div>
</div>

<!-- LOAD SCRIPT -->
<script type="module" src="admin-script.js"></script>

<script>
    // Logic UI Sederhana (Non-Module)
    if(localStorage.getItem('userRole') !== 'admin') {
        alert("Akses Ditolak!"); window.location.href = 'admin-login.html';
    }
    document.getElementById('current-date').innerText = new Date().toLocaleDateString('id-ID', { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' });
    
    function goToHomeAsAdmin() {
        localStorage.setItem('userRole', 'admin');
        localStorage.setItem('userName', 'Super Admin');
        window.location.href = 'index.html';
    }
</script>      
</body>
</html>
