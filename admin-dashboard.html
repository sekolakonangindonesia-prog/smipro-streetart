<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SMIPRO - Control Tower</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="style.css">
    <style>
        /* === CSS ADMIN LAYOUT === */
        body { background: #000; overflow-x: hidden; margin: 0; font-family: 'Segoe UI', sans-serif; }
        
        .admin-container { display: flex; min-height: 100vh; }

        /* SIDEBAR */
        .sidebar { width: 250px; background: #111; border-right: 1px solid #333; display: flex; flex-direction: column; position: fixed; height: 100vh; z-index: 100; }
        .sidebar-header { padding: 20px; text-align: center; border-bottom: 1px solid #222; }
        .sidebar-menu { flex: 1; padding: 20px 0; overflow-y: auto; }
        .menu-item { padding: 15px 25px; color: #888; cursor: pointer; display: flex; align-items: center; gap: 15px; transition: 0.3s; text-decoration: none; font-size: 0.95rem; }
        .menu-item:hover, .menu-item.active { background: #1a1a1a; color: #E50914; border-left: 4px solid #E50914; }
        .menu-item i { width: 25px; text-align: center; }

        /* MAIN CONTENT */
        .main-content { flex: 1; margin-left: 250px; padding: 30px; background: #000; }

        /* CARD STATISTIK */
        .stats-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-bottom: 30px; }
        .stat-card { background: #151515; padding: 20px; border-radius: 10px; border: 1px solid #333; display: flex; align-items: center; gap: 20px; }
        .stat-icon { font-size: 2rem; color: #E50914; background: rgba(229, 9, 20, 0.1); width: 60px; height: 60px; display: flex; align-items: center; justify-content: center; border-radius: 10px; }

        /* TABLE */
        .admin-table { width: 100%; border-collapse: collapse; background: #151515; border-radius: 10px; overflow: hidden; border: 1px solid #333; }
        .admin-table th, .admin-table td { padding: 15px; text-align: left; border-bottom: 1px solid #222; color: #ddd; }
        .admin-table th { background: #222; color: #E50914; text-transform: uppercase; font-size: 0.8rem; }
        .admin-table tr:hover { background: #1a1a1a; }
        
        /* BUTTONS */
        .btn-action { padding: 5px 10px; border-radius: 5px; border: none; cursor: pointer; font-size: 0.8rem; color: white; margin-right: 5px; }
        .btn-view { background: #00d2ff; color: black; }
        .btn-edit { background: #FFD700; color: black; }
        .btn-delete { background: #E50914; }

        /* CMS FORM */
        .sub-tabs { display: flex; gap: 10px; margin-bottom: 20px; border-bottom: 1px solid #333; padding-bottom: 10px; }
        .sub-tab-btn { background: none; border: 1px solid #444; color: #888; padding: 8px 20px; border-radius: 20px; cursor: pointer; }
        .sub-tab-btn.active { background: #E50914; color: white; border-color: #E50914; }
        .cms-form-group { background: #151515; padding: 20px; border-radius: 10px; border: 1px solid #333; margin-bottom: 20px; }
        .cms-input { width: 100%; padding: 10px; background: #222; border: 1px solid #444; color: white; margin-bottom: 15px; border-radius: 5px; box-sizing: border-box; }
        .cms-label { color: #aaa; font-size: 0.85rem; margin-bottom: 5px; display: block; }

        /* UTILS */
        .hidden { display: none; }
        .section-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; border-bottom: 1px dashed #333; padding-bottom: 10px; }
        
        /* MONITOR SPLIT */
        .monitor-split-wrapper { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; min-height: 400px; }
        .monitor-panel { background: #0a0a0a; border: 1px solid #333; border-radius: 10px; display: flex; flex-direction: column; }
        .panel-title { margin: 0; padding: 15px; background: #111; border-radius: 10px 10px 0 0; font-size: 1rem; text-align: center; font-weight: bold; }
        .monitor-list { padding: 15px; flex: 1; overflow-y: auto; max-height: 500px; }
        
        .req-item { background: #1a1a1a; padding: 15px; border-radius: 8px; margin-bottom: 10px; border: 1px solid #333; position: relative; animation: fadeIn 0.5s; }
        .req-item.pending { border-left: 5px solid #ffeb3b; }
        .req-item.live { border-left: 5px solid #00ff00; background: #051a05; }
        .req-amount { position: absolute; top: 10px; right: 10px; background: #333; color: gold; padding: 3px 8px; border-radius: 5px; font-weight: bold; font-size: 0.9rem; }
        
        .btn-control { width: 100%; padding: 10px; border: none; border-radius: 5px; cursor: pointer; font-weight: bold; margin-top: 10px; transition: 0.3s; }
        .btn-approve { background: #00ff00; color: black; }
        .btn-finish { background: #333; color: #ccc; border: 1px solid #555; }
        .btn-finish:hover { background: white; color: black; }
        .empty-state { text-align: center; color: #444; margin-top: 50px; font-style: italic; }

        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        @media (max-width: 768px) {
            .sidebar { width: 60px; } .sidebar-header h3, .menu-item span { display: none; }
            .main-content { margin-left: 60px; padding: 15px; }
            .monitor-split-wrapper { grid-template-columns: 1fr; }
        }

        /* CSS KHUSUS NOTIFIKASI DASHBOARD */
.notif-grid {
    display: flex;
    flex-direction: column;
    gap: 10px;
    margin-top: 15px;
}

/* Kartu Notifikasi */
.notif-card {
    background: #151515;
    border: 1px solid #333;
    border-left: 5px solid #888; /* Default abu-abu */
    padding: 15px;
    border-radius: 8px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    transition: 0.3s;
    animation: fadeIn 0.5s;
}

/* Warna Warni Berdasarkan Tipe Notif */
.notif-card.urgent { border-left-color: #E50914; background: #1a0505; } /* Merah (Penting) */
.notif-card.warning { border-left-color: #ffeb3b; background: #1a1a00; } /* Kuning (Perlu Cek) */
.notif-card.success { border-left-color: #00ff00; background: #051a05; } /* Hijau (Info) */

/* Teks di dalam notif */
.notif-content h4 { margin: 0 0 5px 0; color: white; font-size: 1rem; }
.notif-content p { margin: 0; color: #aaa; font-size: 0.85rem; }

/* Tombol Aksi di Kanan */
.notif-action {
    display: flex;
    gap: 5px;
}

.empty-state-box {
    text-align: center;
    padding: 40px;
    color: #444;
    border: 1px dashed #333;
    border-radius: 10px;
}

/* RESPONSIF HP: Tombol turun ke bawah jika layar sempit */
@media (max-width: 600px) {
    .notif-card {
        flex-direction: column;
        align-items: flex-start;
        gap: 15px;
    }
    .notif-action {
        width: 100%;
    }
    .notif-action button {
        flex: 1; /* Tombol jadi lebar penuh */
        padding: 10px;
    }
}
    </style>
</head>
<body>

<div class="admin-container">
    
    <!-- SIDEBAR -->
    <nav class="sidebar">
        <div class="sidebar-header">
            <img src="https://raw.githubusercontent.com/sekolakonangindonesia-prog/smipro-streetart/main/Logo_Stretart.png" style="width:50px;">
            <h3 style="color:white; margin:10px 0 0; font-size:1rem;">CONTROL TOWER</h3>
            <a href="#" onclick="goToHomeAsAdmin()" style="display:inline-block; margin-top:10px; color:#E50914; text-decoration:none; font-size:0.8rem; border:1px solid #E50914; padding:2px 8px; border-radius:4px;">
                <i class="fa-solid fa-house"></i> Lihat Home
            </a>
        </div>            
        
        <div class="sidebar-menu">
            <a href="#" class="menu-item active" onclick="showView('dashboard', this)"><i class="fa-solid fa-chart-line"></i> <span>Overview</span></a>
            <a href="#" class="menu-item" onclick="showView('mitra', this)"><i class="fa-solid fa-store"></i> <span>Data Mitra</span></a>
            <a href="#" class="menu-item" onclick="showView('performer', this)"><i class="fa-solid fa-guitar"></i> <span>Data Performer</span></a>               
            <a href="#" class="menu-item" onclick="showView('mentor', this)"><i class="fa-solid fa-chalkboard-user"></i> <span>Data Mentor</span></a>
             <a href="#" class="menu-item" onclick="showView('cafe', this)"><i class="fa-solid fa-mug-hot"></i> <span>Data Cafe & Tour</span></a>
            <a href="#" class="menu-item" onclick="showView('students', this)"><i class="fa-solid fa-user-graduate"></i> <span>Bengkel Siswa</span></a>
            <a href="#" class="menu-item" onclick="showView('cms', this)"><i class="fa-solid fa-pen-to-square"></i> <span>Kelola Konten</span></a>
            <a href="#" class="menu-item" onclick="showView('finance', this)"><i class="fa-solid fa-money-bill-wave"></i> <span>Keuangan & Request</span></a>
            
            <div style="margin-top:auto; border-top:1px solid #222;">
                <a href="#" class="menu-item" onclick="adminLogout()" style="color:#E50914;"><i class="fa-solid fa-right-from-bracket"></i> <span>Logout</span></a>
            </div>
        </div>
    </nav>

    <!-- MAIN CONTENT -->
    <main class="main-content">
        
        <!-- 1. OVERVIEW -->
        <div id="view-dashboard" class="admin-view">
            <div class="section-header">
                <div><h2 style="margin:0; color:white;">Dashboard Overview</h2><span style="color:#888;" id="current-date">-</span></div>
                <div style="text-align:right;"><b style="color:white;">Super Admin</b><br><small style="color:#00ff00;">‚óè Online</small></div>
            </div>
            <div class="stats-grid">
                <div class="stat-card"><div class="stat-icon"><i class="fa-solid fa-store"></i></div><div><h3 style="margin:0; color:white;" id="count-mitra">0</h3><small style="color:#888;">Total Mitra</small></div></div>
                <div class="stat-card"><div class="stat-icon" style="color:#FFD700; background:rgba(255, 215, 0, 0.1);"><i class="fa-solid fa-guitar"></i></div><div><h3 style="margin:0; color:white;" id="count-perf">0</h3><small style="color:#888;">Total Performer</small></div></div>
                <div class="stat-card"><div class="stat-icon" style="color:#00d2ff; background:rgba(0, 210, 255, 0.1);"><i class="fa-solid fa-money-bill"></i></div><div><h3 style="margin:0; color:white;" id="total-revenue">Rp 0</h3><small style="color:#888;">Total Saweran (Pending)</small></div></div>
            </div>        
        <!-- JUDUL SECTION -->
    <div class="section-header" style="margin-top: 40px; border-bottom: 1px solid #333; padding-bottom: 10px;">
        <h3 style="margin:0; color:#E50914; display:flex; align-items:center; gap:10px;">
            <i class="fa-solid fa-bell"></i> PUSAT NOTIFIKASI & APPROVAL
        </h3>
    </div>

    <!-- WADAH LIST NOTIFIKASI (Responsive) -->
    <div id="admin-notification-area" class="notif-grid">
        <!-- Nanti Javascript akan mengisi ini secara otomatis -->
        <div class="empty-state-box">
            <i class="fa-solid fa-check-circle"></i>
            <p>Tidak ada notifikasi baru saat ini.</p>
        </div>
    </div>
</div>

        <!-- VIEW 2: MANAJEMEN MITRA & STATISTIK (UPDATED) -->
        <div id="view-mitra" class="admin-view hidden">
            <div class="section-header">
                <h2 style="margin:0; color:white;">Data Mitra & Laporan</h2>
            </div>

            <!-- SUB TABS -->
            <div class="sub-tabs">
                <button class="sub-tab-btn active" onclick="switchMitraTab('mitra-list', this)">Daftar Warung</button>
                <button class="sub-tab-btn" onclick="switchMitraTab('mitra-stats', this)">Laporan Statistik</button>
            </div>
            
            <!-- TAB 1: TABEL DAFTAR WARUNG -->
            <div id="mitra-list" class="mitra-content">
                <div style="text-align:right; margin-bottom:10px;">
                    <button class="btn-action btn-view" onclick="alert('Fitur Tambah Mitra Manual')">+ Tambah</button>
                </div>
                <table class="admin-table">
                    <thead>
                        <tr>
                            <th>Nama Warung</th>
                            <th>Pemilik</th>
                            <th>Meja</th>
                            <th>Status</th>
                            <th>Aksi</th>
                        </tr>
                    </thead>
                    <tbody id="mitra-table-body">
                        <!-- Data Mitra akan di-render di sini oleh JS -->
                        <tr><td colspan="5" style="text-align:center;">Memuat data...</td></tr>
                    </tbody>
                </table>
            </div>

            <!-- TAB 2: STATISTIK & LAPORAN -->
            <div id="mitra-stats" class="mitra-content hidden">
                <div class="section-header" style="border:none;">
                    <h3 style="margin:0; color:#E50914;">Analisa Performa UMKM</h3>
                    
                    <div style="display:flex; gap:10px;">
                        <select id="report-filter" class="cms-input" style="width:auto; padding:5px; margin:0;">
                            <option value="all">Semua Waktu</option>
                            <option value="month">Bulan Ini</option>
                            <option value="week">Minggu Ini</option>
                        </select>
                        <button class="btn-action btn-view" onclick="generateReportPDF()"><i class="fa-solid fa-print"></i> Cetak Laporan PDF</button>
                    </div>
                </div>

                <!-- RINGKASAN -->
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon" style="color:#00ff00; background:rgba(0,255,0,0.1);"><i class="fa-solid fa-users"></i></div>
                        <div>
                            <h3 style="margin:0; color:white;" id="stat-total-visitor">0</h3>
                            <small style="color:#888;">Total Pengunjung (Pax)</small>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon" style="color:gold; background:rgba(255,215,0,0.1);"><i class="fa-solid fa-utensils"></i></div>
                        <div>
                            <h3 style="margin:0; color:white;" id="stat-total-trx">0</h3>
                            <small style="color:#888;">Total Transaksi Meja</small>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon" style="color:#00d2ff; background:rgba(0,210,255,0.1);"><i class="fa-solid fa-money-bill-trend-up"></i></div>
                        <div>
                            <h3 style="margin:0; color:white;" id="stat-total-omzet">Rp 0</h3>
                            <small style="color:#888;">Estimasi Omzet Total</small>
                        </div>
                    </div>
                </div>

                <!-- RANKING WARUNG -->
                <div style="background:#151515; padding:20px; border-radius:10px; border:1px solid #333;">
                    <h4 style="margin-top:0; color:#FFD700;">üèÜ Top Warung Terlaris</h4>
                    <table class="admin-table">
                        <thead>
                            <tr>
                                <th>Peringkat</th>
                                <th>Nama Warung</th>
                                <th>Jml Transaksi</th>
                                <th>Total Pengunjung</th>
                                <th>Total Omzet</th>
                            </tr>
                        </thead>
                        <tbody id="warung-ranking-body">
                            <tr><td colspan="5" style="text-align:center;">Menghitung data...</td></tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- 3. PERFORMER -->
        <div id="view-performer" class="admin-view hidden">
            <div class="section-header"><h2 style="margin:0; color:white;">Data Performer</h2></div>
            <table class="admin-table">
                <thead><tr><th>Nama Artis</th><th>Genre</th><th>Status</th><th>Aksi</th></tr></thead>
                <tbody id="perf-table-body"></tbody>
            </table>
        </div>

        <!-- 4. MENTOR -->
        <div id="view-mentor" class="admin-view hidden">
            <div class="section-header">
                <h2 style="margin:0; color:white;">Data Mentor</h2>
                <button class="btn-action btn-edit" onclick="seedMentors()">+ Generate Data Awal</button>
            </div>
            <table class="admin-table">
                <thead><tr><th>Nama Mentor</th><th>Spesialisasi</th><th>Status</th><th>Aksi</th></tr></thead>
                <tbody id="mentor-table-body"><tr><td colspan="4" style="text-align:center;">Memuat...</td></tr></tbody>
            </table>
        </div>

        <!-- VIEW BARU: MANAJEMEN CAFE & LAPORAN TOUR -->
        <div id="view-cafe" class="admin-view hidden">
            <div class="section-header">
                <h2 style="margin:0; color:white;">SMIPRO On Tour (Cafe Partner)</h2>
            </div>

            <!-- SUB TABS -->
            <div class="sub-tabs">
                <button class="sub-tab-btn active" onclick="switchCafeTab('cafe-data', this)">Data Cafe</button>
                <button class="sub-tab-btn" onclick="switchCafeTab('cafe-report', this)">Pusat Kontrol (Laporan)</button>
            </div>

            <!-- TAB 1: DATA CAFE -->
            <div id="cafe-data" class="cafe-content">
                <div class="cms-form-group" style="display:flex; gap:20px; align-items:center;">

                    !-- 1. Upload Foto -->
                    <div style="text-align:center; cursor:pointer;" onclick="document.getElementById('cafe-file').click()">
                        <img id="cafe-preview" src="https://via.placeholder.com/100?text=Foto" style="width:80px; height:80px; border-radius:50%; object-fit:cover; border:2px dashed #555;">
                        <input type="file" id="cafe-file" style="display:none;" accept="image/*" onchange="previewCafeImg(this)">
                        <div style="font-size:0.7rem; color:#888; margin-top:5px;">Upload Logo</div>
                    </div>

                    <div style="flex:1;">
                        <h4 style="margin-top:0; color:#E50914; margin-bottom:10px;">Kelola Data Partner</h4>
                        
                        <!-- Input ID Tersembunyi (Untuk Mode Edit) -->
                        <input type="hidden" id="cafe-edit-id">

                        <div style="display:grid; grid-template-columns: 1fr 1fr; gap:10px; margin-bottom:10px;">
                            <input type="text" id="new-cafe-name" class="cms-input" placeholder="Nama Cafe" style="margin:0;">
                            <input type="text" id="new-cafe-address" class="cms-input" placeholder="Alamat Singkat" style="margin:0;">
                        </div>
                                           
                    <div style="display:flex; gap:10px;">
                        <button id="btn-save-cafe" class="btn-action btn-view" onclick="saveCafe()" style="width:100%;">+ Simpan Partner</button>
                         <button id="btn-cancel-cafe" class="btn-action btn-delete" onclick="resetCafeForm()" style="width:auto; display:none;">Batal</button>
                        </div>
                    </div>
                </div>
                       
                <table class="admin-table">
                    <thead>
                        <tr>
                            <th>Nama Cafe</th>
                            <th>Alamat</th>
                            <th>Link QR Sawer</th>
                            <th>Aksi</th>
                        </tr>
                    </thead>
                    <tbody id="cafe-table-body">
                        <tr><td colspan="4" style="text-align:center;">Memuat data...</td></tr>
                    </tbody>
                </table>
            </div>

            <!-- TAB 2: PUSAT KONTROL (LAPORAN KHUSUS TOUR) -->
            <div id="cafe-report" class="cafe-content hidden">
                <div class="cms-form-group" style="background:#111; border:1px solid #444;">
                    <h4 style="margin-top:0; color:#00d2ff;">Filter Laporan Tour</h4>
                    
                    <div style="display:grid; grid-template-columns: 1fr 1fr 1fr; gap:10px; margin-bottom:15px;">
                        <div>
                            <label class="cms-label">Pilih Lokasi</label>
                            <select id="rep-loc" class="cms-input">
                                <option value="all">Semua Lokasi (Stadion & Cafe)</option>
                                <option value="Stadion Bayuangga Zone">Stadion Pusat</option>
                                <!-- Nanti nama cafe masuk sini otomatis -->
                            </select>
                        </div>
                        <div>
                            <label class="cms-label">Pilih Periode</label>
                            <select id="rep-time" class="cms-input">
                                <option value="today">Hari Ini</option>
                                <option value="week">Minggu Ini</option>
                                <option value="month">Bulan Ini</option>
                            </select>
                        </div>
                        <div>
                            <label class="cms-label">Pilih Artis</label>
                            <select id="rep-art" class="cms-input">
                                <option value="all">Semua Artis</option>
                                <!-- Nanti nama artis masuk sini otomatis -->
                            </select>
                        </div>
                    </div>
                    
                    <button class="btn-action btn-edit" style="width:100%; font-weight:bold; padding:10px;" onclick="loadCafeReport()">
                        <i class="fa-solid fa-filter"></i> TAMPILKAN DATA
                    </button>
                </div>

                <!-- HASIL LAPORAN -->
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon" style="color:#00ff00; background:rgba(0,255,0,0.1);"><i class="fa-solid fa-sack-dollar"></i></div>
                        <div><h3 style="margin:0; color:white;" id="rep-total-money">Rp 0</h3><small style="color:#888;">Total Saweran</small></div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon" style="color:#FFD700; background:rgba(255,215,0,0.1);"><i class="fa-solid fa-music"></i></div>
                        <div><h3 style="margin:0; color:white;" id="rep-total-song">0</h3><small style="color:#888;">Lagu Direquest</small></div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon" style="color:#00d2ff; background:rgba(0,210,255,0.1);"><i class="fa-solid fa-users"></i></div>
                        <div><h3 style="margin:0; color:white;" id="rep-total-pax">-</h3><small style="color:#888;">Pengunjung (Khusus Stadion)</small></div>
                    </div>
                </div>

                <!-- TABEL DETAIL -->
                <h4 style="margin-top:20px; color:#aaa;">Rincian Transaksi</h4>
                <table class="admin-table">
                    <thead><tr><th>Waktu</th><th>Lokasi</th><th>Artis</th><th>Lagu</th><th>Sawer</th></tr></thead>
                    <tbody id="rep-detail-body">
                        <tr><td colspan="5" style="text-align:center;">Silakan filter data dulu.</td></tr>
                    </tbody>
                </table>
            </div>
        </div>

        <!-- 5. BENGKEL SISWA -->
        <div id="view-students" class="admin-view hidden">
            <div class="section-header"><h2 style="margin:0; color:white;">Bengkel Siswa</h2></div>
            <div style="background:#151515; padding:20px; border-radius:10px; border:1px solid #333; margin-bottom:20px; display:flex; gap:20px; align-items:center;">
                <div style="text-align:center; cursor:pointer;" onclick="document.getElementById('student-file').click()">
                    <img id="student-preview" src="https://via.placeholder.com/100?text=Foto" style="width:80px; height:80px; border-radius:50%; object-fit:cover; border:2px dashed #555;">
                    <input type="file" id="student-file" style="display:none;" accept="image/*" onchange="previewStudentImg(this)">
                    <div style="font-size:0.7rem; color:#888; margin-top:5px;">Upload Foto</div>
                </div>
                <div style="flex:1;">
                    <h4 style="margin-top:0; color:#FFD700; margin-bottom:10px;">Tambah Siswa Baru</h4>
                    <div style="display:grid; grid-template-columns: 1fr 1fr; gap:10px; margin-bottom:10px;">
                        <input type="text" id="new-student-name" class="cms-input" placeholder="Nama Siswa / Grup" style="margin:0;">
                        <input type="text" id="new-student-genre" class="cms-input" placeholder="Genre Musik" style="margin:0;">
                    </div>
                    <button class="btn-action btn-view" onclick="addStudent()" style="width:100%;">+ Masukkan ke Bengkel</button>
                </div>
            </div>
            <table class="admin-table">
                <thead><tr><th style="width:50px;">Foto</th><th>Nama Siswa</th><th>Genre</th><th>Status Nilai</th><th>Aksi</th></tr></thead>
                <tbody id="student-table-body"><tr><td colspan="5" style="text-align:center;">Memuat...</td></tr></tbody>
            </table>
        </div>

        <!-- 6. KELOLA KONTEN (CMS) -->
        <div id="view-cms" class="admin-view hidden">
            <div class="section-header"><h2 style="margin:0; color:white;">Kelola Konten</h2></div>
            <div class="sub-tabs">
                <button class="sub-tab-btn active" onclick="switchCmsTab('cms-schedule', this)">Jadwal Event</button>
                <button class="sub-tab-btn" onclick="switchCmsTab('cms-radio', this)">Radio/TikTok</button>
                <button class="sub-tab-btn" onclick="switchCmsTab('cms-news', this)">Berita & Podcast</button>
                <button class="sub-tab-btn" onclick="switchCmsTab('cms-tour', this)">Jadwal Tour (Cafe)</button>
            </div>

            <!-- JADWAL -->
            <div id="cms-schedule" class="cms-content">
                <div class="cms-form-group">
                    <h4 style="margin-top:0; color:#E50914;">Update Jadwal</h4>
                    <input type="text" id="sched-display-date" class="cms-input" placeholder="Tampilan: Sabtu, 03 JAN">
                    <input type="date" id="sched-real-date" class="cms-input" style="color-scheme:dark;">
                    <select id="sched-location" class="cms-input"><option value="Stadion Bayuangga Zone">Stadion Bayuangga Zone</option></select>
                    <hr style="border-color:#333;">
                    <select id="p1-name" class="cms-input"></select><input type="text" id="p1-time" class="cms-input" placeholder="Jam">
                    <select id="p2-name" class="cms-input"></select><input type="text" id="p2-time" class="cms-input" placeholder="Jam">
                    <select id="p3-name" class="cms-input"></select><input type="text" id="p3-time" class="cms-input" placeholder="Jam">
                    <button class="btn-action btn-delete" style="width:100%; padding:15px;" onclick="saveSchedule()">PUBLISH JADWAL</button>
                </div>
            </div>

            <!-- LIST JADWAL AKTIF (Untuk Menghapus) -->
                <div style="margin-top:30px; border-top:1px dashed #444; padding-top:20px;">
                    <h4 style="margin:0 0 10px 0; color:#aaa;">üìÖ Daftar Jadwal Tayang</h4>
                    
                    <table class="admin-table">
                        <thead>
                            <tr>
                                <th>Tanggal</th>
                                <th>Lokasi</th>
                                <th>Aksi</th>
                            </tr>
                        </thead>
                        <tbody id="cms-schedule-list-body">
                            <tr><td colspan="3" align="center">Memuat data...</td></tr>
                        </tbody>
                    </table>
                </div>
            <!-- FORM JADWAL TOUR / CAFE -->
            <div id="cms-tour" class="cms-content hidden">
                <div class="cms-form-group" style="border-left:5px solid #ff9800;">
                    <h4 style="margin-top:0; color:#ff9800;">Atur Jadwal Cafe / Tour</h4>
                    
                    <label class="cms-label">Tampilan Tanggal (Text):</label>
                    <input type="text" id="tour-display-date" class="cms-input" placeholder="Contoh: SABTU, 17 JAN">
                    
                    <label class="cms-label">Tanggal Asli (Untuk Urutan):</label>
                    <input type="date" id="tour-real-date" class="cms-input" style="color-scheme:dark;">
                    
                    <label class="cms-label">Pilih Lokasi Cafe:</label>
                    <select id="tour-location" class="cms-input">
                        <option value="">-- Memuat Data Cafe... --</option>
                    </select>

                    <hr style="border-color:#333; margin:15px 0;">
                    
                    <label class="cms-label">Artis / Performer:</label>
                    <select id="tour-perf-name" class="cms-input">
                        <!-- Nanti diisi otomatis oleh JS -->
                    </select>
                    
                    <label class="cms-label">Jam Tampil:</label>
                    <input type="text" id="tour-perf-time" class="cms-input" placeholder="Contoh: 19.00 - 21.00 WIB">

                    <button class="btn-action btn-edit" style="width:100%; padding:15px; background:#ff9800; color:black; font-weight:bold;" onclick="saveTourSchedule()">
                        PUBLISH TOUR
                    </button>
                </div>

                <!-- List Jadwal Tour Aktif (Untuk Hapus) -->
                <div style="margin-top:20px;">
                    <h4 style="color:#aaa;">Daftar Tour Aktif</h4>
                    <table class="admin-table">
                        <thead><tr><th>Tanggal</th><th>Lokasi</th><th>Aksi</th></tr></thead>
                        <tbody id="cms-tour-list-body"><tr><td colspan="3">Memuat...</td></tr></tbody>
                    </table>
                </div>
            </div>

            <!-- RADIO -->
            <div id="cms-radio" class="cms-content hidden">
                <div class="cms-form-group">
                    <h4 style="margin-top:0; color:#00d2ff;">Jadwal Radio</h4>
                    <label class="cms-label">Pilih Sesi Siaran:</label>
                    <select id="radio-session-select" class="cms-input" onchange="loadRadioSessionData()">
                        <option value="">-- Pilih Sesi --</option>
                        <option value="PAGI">PAGI</option><option value="SIANG">SIANG</option><option value="MALAM">MALAM</option>
                    </select>
                    
                    <div id="radio-edit-area" style="display:none; margin-top:15px; border-top:1px dashed #333; padding-top:15px;">
                        <label class="cms-label">Judul Acara:</label>
                        <input type="text" id="radio-title" class="cms-input" placeholder="Contoh: Request Lagu Santuy">
                        
                        <label class="cms-label">Nama Host (Ambil dari Performer):</label>
                            <select id="radio-host" class="cms-input">
                            <option value="">-- Sedang Memuat Artis... --</option>
                            </select>
                        
                        <label class="cms-label">Topik Obrolan:</label>
                        <input type="text" id="radio-topic" class="cms-input" placeholder="Topik hari ini...">
                        
                        <label class="cms-label">Link Streaming (TikTok/YouTube):</label>
                        <input type="text" id="radio-link" class="cms-input" placeholder="https://...">

                        <div style="background:#222; padding:10px; border-radius:5px; margin:10px 0;">
                            <label style="color:#00d2ff; font-weight:bold; cursor:pointer; display:flex; align-items:center; gap:10px;">
                                <input type="checkbox" id="radio-live-toggle" style="transform:scale(1.5);"> 
                                STATUS: SEDANG LIVE SEKARANG
                            </label>
                        </div>

                        <button class="btn-action btn-view" style="width:100%; padding:12px; font-weight:bold; margin-top:10px;" onclick="saveRadioUpdate()">
                            <i class="fa-solid fa-floppy-disk"></i> SIMPAN PERUBAHAN
                        </button>
                    </div>

                </div>
            </div>

            <!-- BERITA & PODCAST -->
            <div id="cms-news" class="cms-content hidden">
                <div class="cms-form-group">
                    <h4 style="margin-top:0; color:#E50914;">Publish Konten</h4>
                    <select id="content-category" class="cms-input" onchange="toggleContentForm()">
                        <option value="news">üì∞ Berita</option><option value="podcast">üéôÔ∏è Podcast</option>
                    </select>

                    <!-- Form Berita -->
                    <div id="form-news-container">
                        <input type="text" id="news-title" class="cms-input" placeholder="JUDUL HEADLINE">
                        <input type="text" id="news-tag" class="cms-input" placeholder="Tag">
                        <input type="text" id="news-thumb" class="cms-input" placeholder="Link Foto">
                        <select id="news-type" class="cms-input" onchange="toggleNewsInput()">
                            <option value="internal">Internal</option><option value="external">Eksternal</option>
                        </select>
                        <div id="news-input-internal"><textarea id="news-content" class="cms-input" style="height:150px;" placeholder="Isi Berita..."></textarea></div>
                        <div id="news-input-external" style="display:none;"><input type="text" id="news-url" class="cms-input" placeholder="Link URL"></div>
                        <button class="btn-action btn-view" onclick="saveNews()" style="width:100%;">PUBLISH BERITA</button>
                    </div>

                    <!-- Form Podcast -->
                    <div id="form-podcast-container" style="display:none;">
                        <input type="text" id="pod-title" class="cms-input" placeholder="Judul Eps">
                        <input type="text" id="pod-host" class="cms-input" placeholder="Host">
                        <input type="text" id="pod-duration" class="cms-input" placeholder="Durasi">
                        <input type="text" id="pod-link" class="cms-input" placeholder="Link YouTube">
                        <input type="text" id="pod-thumb" class="cms-input" placeholder="Thumbnail">
                        <input type="number" id="pod-order" class="cms-input" value="1">
                        <button class="btn-action btn-edit" onclick="savePodcast()" style="width:100%;">PUBLISH PODCAST</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- 7. KEUANGAN & COMMAND CENTER -->
        <div id="view-finance" class="admin-view hidden">
            <div class="section-header">
                <h2 style="margin:0; color:white;">üí∞ Live Saweran & Stage Control</h2>
                <div style="text-align:right;"><span style="color:#00ff00; font-weight:bold;">‚óè REALTIME</span></div>
            </div>

            <!-- MONITOR SPLIT -->
            <div class="monitor-split-wrapper">
                <div class="monitor-panel">
                    <h3 class="panel-title" style="color:#ffeb3b; border-bottom:2px solid #ffeb3b;">‚è≥ MENUNGGU VALIDASI</h3>
                    <div id="list-pending" class="monitor-list"><p class="empty-state">Kosong.</p></div>
                </div>
                <div class="monitor-panel">
                    <h3 class="panel-title" style="color:#00ff00; border-bottom:2px solid #00ff00;">üì° LIVE ON STAGE</h3>
                    <div id="list-approved" class="monitor-list"><p class="empty-state">Sepi.</p></div>
                </div>
            </div>

            <hr style="border:0; border-top:1px dashed #333; margin:40px 0;">

            <!-- STATISTIK -->
            <div class="section-header">
                <h2 style="margin:0; color:white;">Laporan & Analisa</h2>
                <select id="stats-filter" onchange="loadFinanceStats()" style="padding:5px; background:#222; color:white; border:1px solid #444; border-radius:5px;">
                    <option value="today">Hari Ini</option><option value="week">Minggu Ini</option><option value="month">Bulan Ini</option><option value="all">Semua</option>
                </select>
            </div>

            <div class="stats-grid">
                <div class="stat-card"><div class="stat-icon" style="color:#00ff00; background:rgba(0,255,0,0.1);"><i class="fa-solid fa-sack-dollar"></i></div><div><h3 style="margin:0; color:white;" id="stat-total-money">Rp 0</h3><small style="color:#888;">Omzet</small></div></div>
                <div class="stat-card"><div class="stat-icon" style="color:#00d2ff; background:rgba(0,210,255,0.1);"><i class="fa-solid fa-music"></i></div><div><h3 style="margin:0; color:white;" id="stat-total-req">0</h3><small style="color:#888;">Request</small></div></div>
                <div class="stat-card"><div class="stat-icon" style="color:#FFD700; background:rgba(255,215,0,0.1);"><i class="fa-solid fa-trophy"></i></div><div><h3 style="margin:0; color:white; font-size:1rem;" id="stat-top-perf">-</h3><small style="color:#888;">Top Artis</small></div></div>
            </div>

            <div style="display:grid; grid-template-columns: 1fr 1fr; gap:20px; margin-top:20px;">
                <div style="background:#151515; padding:20px; border-radius:10px; border:1px solid #333;">
                    <h4 style="margin-top:0; color:#E50914;">üî• Lagu Trending</h4>
                    <div id="chart-top-songs"></div>
                </div>
                <div style="background:#151515; padding:20px; border-radius:10px; border:1px solid #333; max-height:400px; overflow-y:auto;">
                    <h4 style="margin-top:0; color:#aaa;">Log Transaksi</h4>
                    <table class="admin-table">
                        <thead><tr><th>Waktu</th><th>Lagu</th><th>Sawer</th></tr></thead>
                        <tbody id="table-history-body"></tbody>
                    </table>
                </div>
            </div>
        </div>

    </main>
</div>

     <!-- MODAL RAPORT SISWA -->
<div id="modal-raport" style="display:none; position:fixed; inset:0; background:rgba(0,0,0,0.9); z-index:3000; align-items:center; justify-content:center; padding:20px;">
    <div style="background:#1e1e1e; width:100%; max-width:500px; padding:25px; border-radius:10px; border:1px solid #444; position:relative;">
        
        <button onclick="document.getElementById('modal-raport').style.display='none'" style="position:absolute; top:15px; right:15px; background:none; border:none; color:white; font-size:1.5rem; cursor:pointer;">&times;</button>
        
        <h3 style="margin-top:0; color:#FFD700; border-bottom:1px solid #333; padding-bottom:10px;">
            <i class="fa-solid fa-list-check"></i> Raport Detail
        </h3>

        <div style="display:flex; gap:15px; align-items:center; margin-bottom:20px;">
            <img id="rap-img" src="" style="width:60px; height:60px; border-radius:50%; object-fit:cover; border:2px solid #555;">
            <div>
                <h4 id="rap-name" style="margin:0; color:white; font-size:1.2rem;">-</h4>
                <span id="rap-genre" style="color:#888; font-size:0.9rem;">-</span>
            </div>
        </div>

        <!-- TABEL NILAI PER MENTOR -->
        <table class="admin-table" style="font-size:0.9rem;">
            <thead>
                <tr>
                    <th>Nama Mentor</th>
                    <th>Spesialisasi</th>
                    <th>Nilai</th>
                </tr>
            </thead>
            <tbody id="raport-list-body">
                <!-- Data akan masuk sini lewat JS -->
            </tbody>
        </table>

        <div style="margin-top:20px; text-align:center; font-size:0.8rem; color:#666;">
            *Siswa dinyatakan LULUS jika semua Mentor memberi nilai dan tidak ada yang dibawah 75.
        </div>
    </div>
</div>

<!-- LOAD SCRIPT -->
<script type="module" src="admin-script.js"></script>

<script>
    // Logic UI Sederhana (Non-Module)
    if(localStorage.getItem('userRole') !== 'admin') {
        alert("Akses Ditolak!"); window.location.href = 'admin-login.html';
    }
    document.getElementById('current-date').innerText = new Date().toLocaleDateString('id-ID', { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' });
    
    function goToHomeAsAdmin() {
        localStorage.setItem('userRole', 'admin');
        localStorage.setItem('userName', 'Super Admin');
        window.location.href = 'index.html';
    }
</script>   
</body>
</html>
